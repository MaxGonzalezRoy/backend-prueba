<h1 class="text-3xl font-bold text-center my-6">Lista de Productos</h1>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
    {{#each products}}
        <div class="bg-white shadow-md rounded-lg p-4">
            <h2 class="text-xl font-semibold mb-2">{{this.title}}</h2>
            <p class="mb-1">Precio: ${{this.price}}</p>
            <p class="mb-1">Descripción: {{this.description}}</p>
            <p class="mb-1">Categoría: {{this.category}}</p>
            <button 
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-4 rounded mt-2"
                onclick="addToCart('{{this.id}}')"
        >Agregar al carrito</button>
        </div>
    {{/each}}
</div>

<script>
    async function addToCart(productId) {
        const res = await fetch(`/api/carts/1/product/${productId}`, { method: 'POST' });
        if (res.ok) {
            Swal.fire({
                title: 'Agregado',
                text: 'Producto agregado al carrito.',
                icon: 'success',
                timer: 1500,
                showConfirmButton: false
            });
        } else {
            Swal.fire('Error', 'No se pudo agregar el producto.', 'error');
        }
    }
</script>