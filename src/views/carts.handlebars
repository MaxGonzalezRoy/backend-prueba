<h1 class="text-3xl font-bold mb-6 text-indigo-600">ðŸ›’ Tu Carrito</h1>

{{#if cart.products.length}}
<ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {{#each cart.products}}
        <li class="border p-4 rounded-lg shadow bg-white flex flex-col justify-between">
            <div>
                <h2 class="text-lg font-bold text-blue-600">ID Producto: {{this.product}}</h2>
                <p class="text-gray-700">Cantidad: <span class="font-semibold">{{this.quantity}}</span></p>
            </div>
            <button class="mt-4 bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
                    onclick="removeFromCart({{../cart.id}}, {{this.product}})">
                Eliminar
            </button>
        </li>
    {{/each}}
</ul>
{{else}}
<p class="text-gray-500">El carrito estÃ¡ vacÃ­o. Â¡Agrega productos!</p>
{{/if}}

<script>
    async function removeFromCart(cartId, productId) {
        const res = await fetch(`/api/carts/${cartId}/product/${productId}`, {
            method: 'DELETE'
        });

        if (res.ok) {
        location.reload(); // refrescar vista al eliminar
        } else {
            alert("No se pudo eliminar el producto del carrito");
        }
    }
</script>
